# 経費申請システム仕様書（従来版）

## 1. 概要

社内経費申請システムは、従業員が交通費、宿泊費、会議費、備品購入などの経費申請を行い、マネージャーや部長などの上司が承認を行うシステムです。

## 2. 基本機能

### 2.1 経費申請機能
- 従業員は経費申請を作成できる
- 申請項目：申請者、金額、申請タイプ、説明
- 申請後は承認待ち状態になる

### 2.2 承認機能
- 上司は部下の申請を承認または拒否できる
- 承認には階層がある
- 金額により承認者が変わる

## 3. 承認フロー

### 3.1 金額別承認ルール
- 少額（10,000円以下）：直属マネージャーが承認
- 中額（10,001円〜50,000円）：マネージャー承認後、部長承認
- 高額（50,001円以上）：マネージャー、部長、経理部長の順で承認

### 3.2 状態遷移
申請は以下の状態を遷移する：
1. 下書き
2. 申請済み
3. マネージャー承認待ち
4. 部長承認待ち（必要な場合）
5. 経理部長承認待ち（必要な場合）
6. 承認済み
7. 拒否

## 4. ビジネスルール

### 4.1 権限ルール
- 申請者は自分の申請を承認できない
- 上司のみが部下の申請を承認できる
- 承認は順序通り行う必要がある

### 4.2 時間制限
- 承認者が72時間以内に対応しない場合、自動的に次の階層にエスカレーションする
- 申請から2週間以内に最終承認が必要

### 4.3 編集ルール
- 承認済みの申請は編集できない
- 拒否された申請は修正して再申請可能

## 5. データ構造

### 5.1 経費申請エンティティ
```
Expense {
  id: 数値
  申請者: 文字列
  金額: 数値
  タイプ: 文字列（交通費、宿泊費、会議費、備品購入）
  説明: 文字列
  状態: 文字列
  申請日: 日付
}
```

### 5.2 ユーザーエンティティ
```
User {
  id: 数値
  名前: 文字列
  メール: 文字列
  役職: 文字列
  上司: 数値（上司のユーザーID）
}
```

### 5.3 承認履歴エンティティ
```
ApprovalHistory {
  承認者: 数値
  承認日: 日付
  アクション: 文字列（承認、拒否）
  コメント: 文字列
}
```

## 6. システム要件

### 6.1 パフォーマンス
- 申請一覧表示は3秒以内
- 承認処理は1秒以内

### 6.2 セキュリティ
- ユーザー認証が必要
- 他人の申請は見れない
- 管理者は全申請を確認可能

### 6.3 可用性
- 平日9:00-18:00は99%の稼働率
- メンテナンス時間は事前通知

## 7. 注意事項

- 申請金額に上限はない
- 承認者が不在の場合の代理承認は今後検討
- 外貨での申請は円換算で処理
- 申請の取り消しは承認前のみ可能

---

**注記**: この仕様書は従来の開発手法による例であり、意図的に曖昧さや不完全な部分を含んでいます。形式手法による改善版と比較するためのサンプルです。